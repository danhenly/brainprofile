<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brain Profile Assessment</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --header-bg: #e9ecef;
            --border-color: #333;
            --highlight-row: #f8f9fa;
            --error-color: #ffe6e6;
            --error-border: #dc3545;

            /* NBI Colors */
            --l1-blue: #def3fd;
            --l1-blue-dark: #007bff;
            --l2-green: #dff0d8;
            --l2-green-dark: #28a745;
            s --r1-yellow: #fcf8e3;
            --r1-yellow-dark: #ffc107;
            --r2-red: #f2dede;
            --r2-red-dark: #dc3545;
        }

        body {
            font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
            font-size: 14px;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
        }

        /* --- Header Inputs --- */
        .header-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 10px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .input-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .input-group input {
            border: none;
            border-bottom: 1px solid black;
            padding: 5px;
            outline: none;
            font-family: 'Courier New', Courier, monospace;
            background: transparent;
            min-width: 200px;
            font-size: 1.1em;
            font-weight: bold;
        }

        .input-group input.error-input {
            border-bottom: 2px solid var(--error-border);
            background-color: var(--error-color);
        }

        /* --- TOAST NOTIFICATION --- */
        #toast-container {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 2000;
            pointer-events: none;
        }

        .toast {
            min-width: 250px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 4px;
            padding: 16px;
            margin-bottom: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            font-size: 15px;
            opacity: 0;
            transition: opacity 0.3s, transform 0.3s;
            transform: translateY(20px);
            pointer-events: auto;
        }

        .toast.show {
            opacity: 1;
            transform: translateY(0);
        }

        .toast.error {
            background-color: #d32f2f;
        }

        .toast.success {
            background-color: #2e7d32;
        }

        .toast.info {
            background-color: #007bff;
        }

        /* --- SHARE MODAL (New) --- */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(2px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 12px;
            width: 100%;
            max-width: 500px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            position: relative;
            text-align: center;
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from {
                transform: translateY(20px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-title {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .modal-desc {
            color: #666;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .share-link-box {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .share-link-box input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-family: monospace;
            background: #f8f9fa;
        }

        .share-link-box button {
            margin: 0;
            background-color: var(--primary-color);
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            color: #999;
            padding: 0;
        }

        .close-modal:hover {
            color: #333;
            opacity: 1;
        }

        /* --- NBI RESULTS SECTION --- */
        #nbi-results-container {
            display: none;
            margin-bottom: 30px;
            border: 2px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            background-color: #fff;
        }

        .nbi-header {
            text-align: center;
            margin-bottom: 15px;
        }

        .nbi-header h2 {
            margin: 0;
            color: var(--primary-color);
        }

        .nbi-desc {
            font-size: 0.9em;
            color: #666;
            margin-top: 5px;
            font-style: italic;
        }

        .nbi-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }

        .brain-quadrant {
            padding: 15px;
            border-radius: 6px;
            border: 1px solid rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .quad-title {
            font-weight: bold;
            text-transform: uppercase;
            font-size: 0.85em;
            margin-bottom: 5px;
            opacity: 0.7;
        }

        .quad-name {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .quad-score {
            font-size: 2em;
            font-weight: bold;
            float: right;
        }

        .quad-desc {
            font-size: 0.8em;
            clear: both;
            margin-top: 5px;
        }

        .q-blue {
            background-color: var(--l1-blue);
            color: var(--l1-blue-dark);
            border-left: 5px solid var(--l1-blue-dark);
        }

        .q-green {
            background-color: var(--l2-green);
            color: var(--l2-green-dark);
            border-left: 5px solid var(--l2-green-dark);
        }

        .q-yellow {
            background-color: var(--r1-yellow);
            color: #b78a02;
            border-left: 5px solid var(--r1-yellow-dark);
        }

        .q-red {
            background-color: var(--r2-red);
            color: var(--r2-red-dark);
            border-left: 5px solid var(--r2-red-dark);
        }

        .nbi-explanation {
            font-size: 0.9em;
            background: #f9f9f9;
            padding: 10px;
            border-radius: 4px;
            border-left: 4px solid #666;
            line-height: 1.4;
        }

        .dominant-badge {
            background: #333;
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.7em;
            vertical-align: middle;
            display: none;
        }

        .instructions {
            font-style: italic;
            margin-bottom: 15px;
            color: #555;
        }

        /* --- TABLE / QUIZ STYLING --- */
        table {
            width: 100%;
            border-collapse: collapse;
            border: 2px solid var(--border-color);
        }

        th,
        td {
            border: 1px solid var(--border-color);
            padding: 8px;
            vertical-align: top;
        }

        th {
            background-color: var(--header-bg);
            font-weight: bold;
            text-align: center;
            vertical-align: middle;
        }

        /* Desktop Column Widths */
        th:nth-child(1) {
            width: 30px;
        }

        th:nth-child(2) {
            width: 25%;
        }

        tr:nth-child(even) {
            background-color: var(--highlight-row);
        }

        tr.error-row {
            background-color: var(--error-color) !important;
            border: 2px solid var(--error-border);
        }

        label {
            display: flex;
            align-items: flex-start;
            gap: 8px;
            cursor: pointer;
            height: 100%;
        }

        input[type="radio"] {
            margin-top: 3px;
            transform: scale(1.2);
            cursor: pointer;
        }

        .results-section {
            background-color: #dde2e6 !important;
            font-weight: bold;
        }

        .total-box {
            font-size: 1.5em;
            text-align: center;
            padding: 10px;
            font-family: 'Courier New', Courier, monospace;
            color: #d32f2f;
        }

        /* --- CONTROLS --- */
        .controls {
            margin-top: 30px;
            text-align: center;
            padding: 20px;
            background: #eee;
            border-radius: 8px;
            position: sticky;
            bottom: 0;
            border-top: 1px solid #ccc;
            z-index: 100;
        }

        button {
            padding: 12px 24px;
            font-size: 16px;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 4px;
            margin: 5px;
            transition: opacity 0.2s;
            font-weight: bold;
        }

        button:hover {
            opacity: 0.9;
        }

        button.calc-btn {
            background-color: var(--primary-color);
        }

        button.reset-btn {
            background-color: #dc3545;
        }

        button.print-btn {
            background-color: #28a745;
        }

        button.share-btn {
            background-color: #17a2b8;
        }

        /* --- MOBILE QUIZ MODE (Screens < 768px) --- */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .container {
                padding: 10px;
            }

            .header-info {
                flex-direction: column;
                align-items: stretch;
            }

            .input-group input {
                width: 100%;
            }

            .nbi-grid {
                grid-template-columns: 1fr;
            }

            table,
            thead,
            tbody,
            th,
            td,
            tr {
                display: block;
                width: auto;
            }

            thead {
                display: none;
            }

            tr {
                margin-bottom: 20px;
                border: 1px solid #ddd;
                border-radius: 8px;
                background: white;
                box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
                overflow: hidden;
            }

            td:nth-of-type(1) {
                background-color: var(--primary-color);
                color: white;
                font-weight: bold;
                border: none;
                padding: 5px 15px;
                font-size: 0.9em;
                display: inline-block;
                border-bottom-right-radius: 8px;
                margin-bottom: 5px;
            }

            td:nth-of-type(2) {
                font-size: 1.2em;
                font-weight: 600;
                border: none;
                padding: 10px 15px 15px 15px;
                color: #000;
            }

            td:nth-of-type(3),
            td:nth-of-type(4),
            td:nth-of-type(5),
            td:nth-of-type(6) {
                border: none;
                border-top: 1px solid #eee;
                padding: 12px 15px;
                background: #fff;
            }

            .results-section {
                display: none;
            }

            tr:last-child {
                display: none;
            }
        }

        /* --- PRINT PDF OVERRIDE --- */
        @media print {
            body {
                background: white;
                padding: 0;
                margin: 0;
            }

            .container {
                width: 100%;
                max-width: none;
                box-shadow: none;
                padding: 0;
                margin: 0;
                border: none;
            }

            .controls,
            #toast-container,
            .modal-overlay {
                display: none !important;
            }

            table {
                display: table !important;
                border: 2px solid #000 !important;
            }

            thead {
                display: table-header-group !important;
            }

            tbody {
                display: table-row-group !important;
            }

            tr {
                display: table-row !important;
                margin: 0 !important;
                box-shadow: none !important;
                border-radius: 0 !important;
                border: none !important;
            }

            td,
            th {
                display: table-cell !important;
                width: auto !important;
                border: 1px solid #000 !important;
                padding: 6px !important;
            }

            td:nth-of-type(1) {
                background: transparent !important;
                color: black !important;
                font-weight: normal !important;
            }

            td:nth-of-type(2) {
                font-size: inherit !important;
                font-weight: normal !important;
                padding: 8px !important;
            }

            .results-section {
                display: table-row !important;
                background-color: #ddd !important;
                -webkit-print-color-adjust: exact;
            }

            tr:last-child {
                display: table-row !important;
            }

            #nbi-results-container.visible-print {
                display: block !important;
                border: none;
                padding: 0;
            }

            .nbi-grid {
                display: grid !important;
                grid-template-columns: 1fr 1fr !important;
                gap: 10px !important;
            }

            .brain-quadrant {
                break-inside: avoid;
                border: 1px solid #ccc;
            }
        }
    </style>
</head>

<body>

    <div id="toast-container"></div>

    <div id="shareModal" class="modal-overlay">
        <div class="modal-content">
            <button class="close-modal" onclick="closeShareModal()">&times;</button>
            <div class="modal-title">Share Your Results</div>
            <div class="modal-desc">
                Please share this link with your team leaders and other team members so they can view your profile.
            </div>
            <div class="share-link-box">
                <input type="text" id="shareInput" readonly>
                <button onclick="copyFromModal()">Copy</button>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="header-info">
            <div class="input-group">
                <label>NAME:</label>
                <input type="text" id="inpName" placeholder="Enter Name">
            </div>
            <div class="input-group">
                <label>DEPARTMENT:</label>
                <input type="text" id="inpDept" placeholder="Enter Dept">
            </div>
            <div class="input-group">
                <label>DATE:</label>
                <input type="date" id="inpDate">
            </div>
        </div>

        <div id="nbi-results-container">
            <div class="nbi-header">
                <h2>NBIâ„¢ Brain Profile Summary</h2>
                <div class="nbi-desc">Based on your calculated scores below</div>
            </div>

            <div class="nbi-grid">
                <div class="brain-quadrant q-blue">
                    <div class="quad-title">L1 Left Cerebral <span id="badge-A" class="dominant-badge">DOMINANT</span>
                    </div>
                    <div class="quad-name">REALIST</div>
                    <div class="quad-score" id="score-disp-A">0</div>
                    <div class="quad-desc">Factual, critical, rational, logical. "The Bottom Line."</div>
                </div>

                <div class="brain-quadrant q-yellow">
                    <div class="quad-title">R1 Right Cerebral <span id="badge-C" class="dominant-badge">DOMINANT</span>
                    </div>
                    <div class="quad-name">STRATEGIST</div>
                    <div class="quad-score" id="score-disp-C">0</div>
                    <div class="quad-desc">Holistic, intuitive, integrating, visionary. "The Big Picture."</div>
                </div>

                <div class="brain-quadrant q-green">
                    <div class="quad-title">L2 Left Limbic <span id="badge-B" class="dominant-badge">DOMINANT</span>
                    </div>
                    <div class="quad-name">PRESERVER</div>
                    <div class="quad-score" id="score-disp-B">0</div>
                    <div class="quad-desc">Sequential, organized, planned, detailed. "The Details."</div>
                </div>

                <div class="brain-quadrant q-red">
                    <div class="quad-title">R2 Right Limbic <span id="badge-D" class="dominant-badge">DOMINANT</span>
                    </div>
                    <div class="quad-name">SOCIALIZER</div>
                    <div class="quad-score" id="score-disp-D">0</div>
                    <div class="quad-desc">Emotional, interpersonal, sensory. "The People."</div>
                </div>
            </div>

            <div class="nbi-explanation">
                <strong>About Neethling Brain Instruments (NBI):</strong>
                The NBI profile divides thinking preferences into four quadrants. Left Brain (L1/L2) focuses on logic
                and structure. Right Brain (R1/R2) focuses on intuition and people. High scores represent your "comfort
                zone."
            </div>
        </div>

        <div class="instructions">
            Instructions: Please read the "SITUATION" given and choose only one profile.
        </div>

        <div class="table-responsive">
            <form id="assessmentForm">
                <table>
                    <thead>
                        <tr>
                            <th>No.</th>
                            <th>SITUATION</th>
                            <th>Option A</th>
                            <th>Option B</th>
                            <th>Option C</th>
                            <th>Option D</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr id="row1">
                            <td align="center">1</td>
                            <td>I learn best:</td>
                            <td><label><input type="radio" name="q1" value="A"> by looking at key points &
                                    summaries</label></td>
                            <td><label><input type="radio" name="q1" value="B"> by looking at chronological & well
                                    planned lessons with clear instructions & objectives</label></td>
                            <td><label><input type="radio" name="q1" value="C"> through fun, new & experimental methods
                                    of teaching</label></td>
                            <td><label><input type="radio" name="q1" value="D"> when I connect with the teacher</label>
                            </td>
                        </tr>
                        <tr id="row2">
                            <td align="center">2</td>
                            <td>When problem solving I prefer to:</td>
                            <td><label><input type="radio" name="q2" value="A"> analyse the facts first</label></td>
                            <td><label><input type="radio" name="q2" value="B"> arrange and organize facts first</label>
                            </td>
                            <td><label><input type="radio" name="q2" value="C"> solve problems using "gut feeling"
                                    first</label></td>
                            <td><label><input type="radio" name="q2" value="D"> look at how it impacts people
                                    first</label></td>
                        </tr>
                        <tr id="row3">
                            <td align="center">3</td>
                            <td>In meetings, I prefer to be:</td>
                            <td><label><input type="radio" name="q3" value="A"> logical</label></td>
                            <td><label><input type="radio" name="q3" value="B"> detailed</label></td>
                            <td><label><input type="radio" name="q3" value="C"> imaginative</label></td>
                            <td><label><input type="radio" name="q3" value="D"> people-focused</label></td>
                        </tr>
                        <tr id="row4">
                            <td align="center">4</td>
                            <td>I prefer to:</td>
                            <td><label><input type="radio" name="q4" value="A"> gather all information</label></td>
                            <td><label><input type="radio" name="q4" value="B"> seek details & elaborations</label></td>
                            <td><label><input type="radio" name="q4" value="C"> look at new ideas and stimulating
                                    suggestions</label></td>
                            <td><label><input type="radio" name="q4" value="D"> share ideas</label></td>
                        </tr>
                        <tr id="row5">
                            <td align="center">5</td>
                            <td>As a parent, I prefer to:</td>
                            <td><label><input type="radio" name="q5" value="A"> reach a decision quickly after factual
                                    analysis</label></td>
                            <td><label><input type="radio" name="q5" value="B"> validate through careful
                                    planning</label></td>
                            <td><label><input type="radio" name="q5" value="C"> test & push limits</label></td>
                            <td><label><input type="radio" name="q5" value="D"> gather feedback & get buy-in from
                                    others</label></td>
                        </tr>
                        <tr id="row6">
                            <td align="center">6</td>
                            <td>I keep tab on:</td>
                            <td><label><input type="radio" name="q6" value="A"> insist my child focuses on the task at
                                    hand</label></td>
                            <td><label><input type="radio" name="q6" value="B"> be safety conscious to ensure that my
                                    child is protected</label></td>
                            <td><label><input type="radio" name="q6" value="C"> encourage my child to "try out"
                                    something new</label></td>
                            <td><label><input type="radio" name="q6" value="D"> encourage group activities & want my
                                    child to be a "joiner"</label></td>
                        </tr>
                        <tr id="row7">
                            <td align="center">7</td>
                            <td>When playing, I prefer to:</td>
                            <td><label><input type="radio" name="q7" value="A"> performance & monitor and assess
                                    results</label></td>
                            <td><label><input type="radio" name="q7" value="B"> ensuring others follow procedures, rules
                                    and regulations</label></td>
                            <td><label><input type="radio" name="q7" value="C"> the future positioning of a
                                    project</label></td>
                            <td><label><input type="radio" name="q7" value="D"> reaching out to others in
                                    decision-making</label></td>
                        </tr>
                        <tr id="row8">
                            <td align="center">8</td>
                            <td>The biggest complaint about myself is that I:</td>
                            <td><label><input type="radio" name="q8" value="A"> apply correct skills &
                                    techniques</label></td>
                            <td><label><input type="radio" name="q8" value="B"> ensure consistency of
                                    performance</label></td>
                            <td><label><input type="radio" name="q8" value="C"> handle the game in a unique way</label>
                            </td>
                            <td><label><input type="radio" name="q8" value="D"> enjoy the people "dynamics" & energy
                                    level</label></td>
                        </tr>
                        <tr id="row9">
                            <td align="center">9</td>
                            <td>The biggest complaint about myself is that I:</td>
                            <td><label><input type="radio" name="q9" value="A"> am critical</label></td>
                            <td><label><input type="radio" name="q9" value="B"> am predictable</label></td>
                            <td><label><input type="radio" name="q9" value="C"> am not practical or grounded</label>
                            </td>
                            <td><label><input type="radio" name="q9" value="D"> hold grudges</label></td>
                        </tr>
                        <tr id="row10">
                            <td align="center">10</td>
                            <td>I prefer:</td>
                            <td><label><input type="radio" name="q10" value="A"> anything with focus, preciseness &
                                    exactness</label></td>
                            <td><label><input type="radio" name="q10" value="B"> tried & tested methods</label></td>
                            <td><label><input type="radio" name="q10" value="C"> new ideas</label></td>
                            <td><label><input type="radio" name="q10" value="D"> to bring new insights into
                                    ideas</label></td>
                        </tr>
                        <tr id="row11">
                            <td align="center">11</td>
                            <td>The question I often ask is:</td>
                            <td><label><input type="radio" name="q11" value="A"> What?</label></td>
                            <td><label><input type="radio" name="q11" value="B"> How?</label></td>
                            <td><label><input type="radio" name="q11" value="C"> Why?</label></td>
                            <td><label><input type="radio" name="q11" value="D"> Who?</label></td>
                        </tr>
                        <tr id="row12">
                            <td align="center">12</td>
                            <td>When looking at an issue, I prefer to:</td>
                            <td><label><input type="radio" name="q12" value="A"> see facts clearly (with no
                                    emotions)</label></td>
                            <td><label><input type="radio" name="q12" value="B"> deal with facts chronologically</label>
                            </td>
                            <td><label><input type="radio" name="q12" value="C"> visualise the facts</label></td>
                            <td><label><input type="radio" name="q12" value="D"> have an intuitive feel for people
                                    involved</label></td>
                        </tr>
                        <tr id="row13">
                            <td align="center">13</td>
                            <td>I prefer to:</td>
                            <td><label><input type="radio" name="q13" value="A"> research based on facts &
                                    analysis</label></td>
                            <td><label><input type="radio" name="q13" value="B"> evaluate all angles</label></td>
                            <td><label><input type="radio" name="q13" value="C"> apply intuition & take risks</label>
                            </td>
                            <td><label><input type="radio" name="q13" value="D"> be socially considerate</label></td>
                        </tr>
                        <tr id="row14">
                            <td align="center">14</td>
                            <td>For me, the following act is the most important:</td>
                            <td><label><input type="radio" name="q14" value="A"> enforcing decision</label></td>
                            <td><label><input type="radio" name="q14" value="B"> timely & effective
                                    implementation</label></td>
                            <td><label><input type="radio" name="q14" value="C"> taking risk to fulfill business
                                    outcome</label></td>
                            <td><label><input type="radio" name="q14" value="D"> understanding group behaviour &
                                    utilizing feedback</label></td>
                        </tr>
                        <tr id="row15">
                            <td align="center">15</td>
                            <td>I prefer to:</td>
                            <td><label><input type="radio" name="q15" value="A"> summarise and analyse</label></td>
                            <td><label><input type="radio" name="q15" value="B"> categorise & make checklist</label>
                            </td>
                            <td><label><input type="radio" name="q15" value="C"> mind map & visualize</label></td>
                            <td><label><input type="radio" name="q15" value="D"> verbalise & discuss with others</label>
                            </td>
                        </tr>
                        <tr id="row16">
                            <td align="center">16</td>
                            <td>You prefer to place importance on the:</td>
                            <td><label><input type="radio" name="q16" value="A"> outcome</label></td>
                            <td><label><input type="radio" name="q16" value="B"> task</label></td>
                            <td><label><input type="radio" name="q16" value="C"> creative process</label></td>
                            <td><label><input type="radio" name="q16" value="D"> person/people</label></td>
                        </tr>
                        <tr id="row17">
                            <td align="center">17</td>
                            <td>I get:</td>
                            <td><label><input type="radio" name="q17" value="A"> irritated with too many unnecessary
                                    details that distracts me from achieving outcome</label></td>
                            <td><label><input type="radio" name="q17" value="B"> upset by unplanned meetings, events &
                                    sudden request</label></td>
                            <td><label><input type="radio" name="q17" value="C"> bored easily</label></td>
                            <td><label><input type="radio" name="q17" value="D"> emotional when people & their concerns
                                    are not properly handled</label></td>
                        </tr>
                        <tr id="row18">
                            <td align="center">18</td>
                            <td>In your relationship, I prefer:</td>
                            <td><label><input type="radio" name="q18" value="A"> being clear on what is "right" &
                                    "wrong" in a relationship</label></td>
                            <td><label><input type="radio" name="q18" value="B"> stable, long lasting
                                    relationship</label></td>
                            <td><label><input type="radio" name="q18" value="C"> to surprise your partner & like to be
                                    surprised by your partner</label></td>
                            <td><label><input type="radio" name="q18" value="D"> not to hide your affection or
                                    love</label></td>
                        </tr>
                        <tr id="row19">
                            <td align="center">19</td>
                            <td>I prefer to:</td>
                            <td><label><input type="radio" name="q19" value="A"> stand firm on issues & have the last
                                    say</label></td>
                            <td><label><input type="radio" name="q19" value="B"> work with experienced & highly skilled
                                    employees</label></td>
                            <td><label><input type="radio" name="q19" value="C"> support new ideas & encourage
                                    alternative ways of doing things</label></td>
                            <td><label><input type="radio" name="q19" value="D"> communicate with team & reach
                                    consensus</label></td>
                        </tr>
                        <tr id="row20">
                            <td align="center">20</td>
                            <td>Which one of these phrases best describes you?</td>
                            <td><label><input type="radio" name="q20" value="A"> "Do it my way"</label></td>
                            <td><label><input type="radio" name="q20" value="B"> "Always Look before You Leap"</label>
                            </td>
                            <td><label><input type="radio" name="q20" value="C"> "No Risk! No Gain!"</label></td>
                            <td><label><input type="radio" name="q20" value="D"> "Values, Feelings & People"</label>
                            </td>
                        </tr>

                        <tr class="results-section">
                            <td colspan="2" align="right" style="vertical-align: middle; font-size: 1.2em;">TOTAL</td>
                            <td>
                                <div id="totalA" class="total-box">-</div>
                            </td>
                            <td>
                                <div id="totalB" class="total-box">-</div>
                            </td>
                            <td>
                                <div id="totalC" class="total-box">-</div>
                            </td>
                            <td>
                                <div id="totalD" class="total-box">-</div>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2"></td>
                            <td align="center"><strong>Option A</strong></td>
                            <td align="center"><strong>Option B</strong></td>
                            <td align="center"><strong>Option C</strong></td>
                            <td align="center"><strong>Option D</strong></td>
                        </tr>
                    </tbody>
                </table>
            </form>
        </div>

        <div class="controls">
            <button type="button" class="calc-btn" onclick="validateAndCalculate()">Calculate & View</button>
            <button type="button" class="share-btn" onclick="validateAndShare()">Share Results</button>
            <button type="button" class="print-btn" onclick="validateAndPrint()">Print to PDF</button>
            <button type="button" class="reset-btn" onclick="resetForm()">Reset</button>
        </div>
    </div>

    <script>
        // --- Toast Logic ---
        function showToast(message, type = 'error') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            container.appendChild(toast);
            void toast.offsetWidth;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => { if (container.contains(toast)) container.removeChild(toast); }, 300);
            }, 3000);
        }

        // --- Modal Logic ---
        function openShareModal(url) {
            document.getElementById('shareInput').value = url;
            document.getElementById('shareModal').style.display = 'flex';
        }

        function closeShareModal() {
            document.getElementById('shareModal').style.display = 'none';
        }

        function copyFromModal() {
            const copyText = document.getElementById("shareInput");
            copyText.select();
            copyText.setSelectionRange(0, 99999);
            navigator.clipboard.writeText(copyText.value).then(() => {
                showToast("Copied to clipboard!", "success");
            });
        }

        // Close modal when clicking outside
        window.onclick = function (event) {
            const modal = document.getElementById('shareModal');
            if (event.target == modal) {
                closeShareModal();
            }
        }

        // --- Core Calculation Logic ---
        function calculateScores(showResults = false) {
            let scores = { A: 0, B: 0, C: 0, D: 0 };
            for (let i = 1; i <= 20; i++) {
                const radios = document.getElementsByName('q' + i);
                for (const radio of radios) {
                    if (radio.checked) {
                        scores[radio.value]++;
                        break;
                    }
                }
            }
            // Update Totals
            document.getElementById('totalA').textContent = scores.A;
            document.getElementById('totalB').textContent = scores.B;
            document.getElementById('totalC').textContent = scores.C;
            document.getElementById('totalD').textContent = scores.D;

            // Update Dashboard
            document.getElementById('score-disp-A').textContent = scores.A;
            document.getElementById('score-disp-B').textContent = scores.B;
            document.getElementById('score-disp-C').textContent = scores.C;
            document.getElementById('score-disp-D').textContent = scores.D;

            // Dominant Profile Badge
            const maxScore = Math.max(scores.A, scores.B, scores.C, scores.D);
            ['A', 'B', 'C', 'D'].forEach(p => document.getElementById(`badge-${p}`).style.display = 'none');
            if (maxScore > 0) {
                if (scores.A === maxScore) document.getElementById('badge-A').style.display = 'inline-block';
                if (scores.B === maxScore) document.getElementById('badge-B').style.display = 'inline-block';
                if (scores.C === maxScore) document.getElementById('badge-C').style.display = 'inline-block';
                if (scores.D === maxScore) document.getElementById('badge-D').style.display = 'inline-block';
            }

            if (showResults) {
                const resultDiv = document.getElementById('nbi-results-container');
                resultDiv.style.display = 'block';
                resultDiv.classList.add('visible-print');
                resultDiv.scrollIntoView({ behavior: "smooth", block: "center" });
            }
        }

        function clearErrors() {
            document.getElementById('inpName').classList.remove('error-input');
            document.getElementById('inpDept').classList.remove('error-input');
            document.getElementById('inpDate').classList.remove('error-input');
            for (let i = 1; i <= 20; i++) {
                document.getElementById('row' + i).classList.remove('error-row');
            }
        }

        // --- Validation Logic ---
        function validateForm() {
            clearErrors();
            let isValid = true;
            let firstErrorElement = null;

            const name = document.getElementById('inpName');
            const dept = document.getElementById('inpDept');
            const date = document.getElementById('inpDate');

            if (!name.value.trim()) { isValid = false; name.classList.add('error-input'); if (!firstErrorElement) firstErrorElement = name; }
            if (!dept.value.trim()) { isValid = false; dept.classList.add('error-input'); if (!firstErrorElement) firstErrorElement = dept; }
            if (!date.value) { isValid = false; date.classList.add('error-input'); if (!firstErrorElement) firstErrorElement = date; }

            for (let i = 1; i <= 20; i++) {
                const radios = document.getElementsByName('q' + i);
                let rowChecked = false;
                for (const radio of radios) { if (radio.checked) { rowChecked = true; break; } }
                if (!rowChecked) {
                    isValid = false;
                    const row = document.getElementById('row' + i);
                    row.classList.add('error-row');
                    if (!firstErrorElement) firstErrorElement = row;
                }
            }
            return { isValid, firstErrorElement };
        }

        // --- Share Logic (Compressed) ---
        function validateAndShare() {
            const result = validateForm();
            if (!result.isValid) {
                showToast("Please complete all highlighted fields before sharing.", "error");
                if (result.firstErrorElement) result.firstErrorElement.scrollIntoView({ behavior: "smooth", block: "center" });
                return;
            }

            // Compact Data Structure for "Hash"
            let answerString = "";
            for (let i = 1; i <= 20; i++) {
                answerString += document.querySelector(`input[name="q${i}"]:checked`).value;
            }

            const dataObj = {
                n: document.getElementById('inpName').value,
                d: document.getElementById('inpDept').value,
                t: document.getElementById('inpDate').value,
                a: answerString // Compact string "ABCD..."
            };

            // Create "Hash" (Base64 Encoded JSON)
            try {
                const jsonStr = JSON.stringify(dataObj);
                const hash = btoa(jsonStr); // Encode

                const shareUrl = `${window.location.protocol}//${window.location.host}${window.location.pathname}?data=${hash}`;
                openShareModal(shareUrl);
            } catch (e) {
                console.error(e);
                showToast("Error generating link", "error");
            }
        }

        // --- On Load: Parse "Hash" ---
        window.addEventListener('DOMContentLoaded', () => {
            const params = new URLSearchParams(window.location.search);

            if (params.has('data')) {
                try {
                    // Decode Hash
                    const hash = params.get('data');
                    const jsonStr = atob(hash);
                    const data = JSON.parse(jsonStr);

                    // Populate Fields
                    document.getElementById('inpName').value = data.n || '';
                    document.getElementById('inpDept').value = data.d || '';
                    document.getElementById('inpDate').value = data.t || '';

                    // Populate Answers from compact string
                    if (data.a && data.a.length === 20) {
                        for (let i = 0; i < 20; i++) {
                            const qNum = i + 1;
                            const val = data.a[i]; // char at index
                            const radio = document.querySelector(`input[name="q${qNum}"][value="${val}"]`);
                            if (radio) radio.checked = true;
                        }
                    }

                    // Calculate
                    calculateScores(true);
                    showToast("Shared results loaded successfully.", "info");

                    // Clean URL
                    window.history.pushState({}, document.title, window.location.pathname);

                } catch (e) {
                    console.error("Error parsing data param", e);
                    showToast("Invalid or corrupted share link.", "error");
                }
            }

            document.getElementById('assessmentForm').addEventListener('change', () => calculateScores(false));
        });

        // --- Other Buttons ---
        function validateAndCalculate() {
            const result = validateForm();
            if (result.isValid) {
                calculateScores(true);
                showToast("Profile calculated successfully!", "success");
            } else {
                showToast("Please complete all highlighted fields.", "error");
                if (result.firstErrorElement) result.firstErrorElement.scrollIntoView({ behavior: "smooth", block: "center" });
            }
        }

        function validateAndPrint() {
            const result = validateForm();
            if (result.isValid) {
                calculateScores(true);
                setTimeout(() => window.print(), 100);
            } else {
                showToast("Please fill all fields before printing.", "error");
                if (result.firstErrorElement) result.firstErrorElement.scrollIntoView({ behavior: "smooth", block: "center" });
            }
        }

        function resetForm() {
            if (confirm("Clear entire form?")) {
                document.getElementById('assessmentForm').reset();
                document.getElementById('inpName').value = "";
                document.getElementById('inpDept').value = "";
                document.getElementById('inpDate').value = "";
                document.getElementById('nbi-results-container').style.display = 'none';
                document.getElementById('nbi-results-container').classList.remove('visible-print');
                calculateScores(false);
                clearErrors();
                showToast("Form cleared.", "success");
            }
        }
    </script>

</body>

</html>